# –í–æ–¥–∏—á –∑–∞ –ø—Ä–µ–±–∞—Ä—É–≤–∞—ö–µ –ø–æ–º–µ—ì—É H2 –∏ PostgreSQL

## –ë—Ä–∑–æ –ø—Ä–µ–±–∞—Ä—É–≤–∞—ö–µ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª

### –ó–∞ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—ò–∞ (H2):
1. –û—Ç–≤–æ—Ä–µ—Ç–µ `application.properties`
2. –ü—Ä–æ–º–µ–Ω–µ—Ç–µ —ò–∞ –ª–∏–Ω–∏—ò–∞—Ç–∞:
```properties
spring.profiles.active=h2
```
3. –†–µ—Å—Ç–∞—Ä—Ç–∏—Ä–∞—ò—Ç–µ —ò–∞ –∞–ø–ª–∏–∫–∞—Ü–∏—ò–∞—Ç–∞

### –ó–∞ –¥–æ–º–∞—à–Ω–∞ —Ä–∞–±–æ—Ç–∞ (PostgreSQL):
1. –û—Ç–≤–æ—Ä–µ—Ç–µ `application.properties`
2. –ü—Ä–æ–º–µ–Ω–µ—Ç–µ —ò–∞ –ª–∏–Ω–∏—ò–∞—Ç–∞:
```properties
spring.profiles.active=prod
```
3. –†–µ—Å—Ç–∞—Ä—Ç–∏—Ä–∞—ò—Ç–µ —ò–∞ –∞–ø–ª–∏–∫–∞—Ü–∏—ò–∞—Ç–∞

---

## –î–µ—Ç–∞–ª–Ω–æ –æ–±—ò–∞—Å–Ω—É–≤–∞—ö–µ

### H2 Profile (In-Memory –±–∞–∑–∞)

**–ö–æ–≥–∞ –¥–∞ –∫–æ—Ä–∏—Å—Ç–∏—Ç–µ:**
- –ù–∞ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—Å–∫–∏—Ç–µ –≤–µ–∂–±–∏
- –ó–∞ –±—Ä–∑–æ —Ç–µ—Å—Ç–∏—Ä–∞—ö–µ
- –ö–æ–≥–∞ –Ω–µ–º–∞—Ç–µ PostgreSQL –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞–Ω

**–ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- ‚úÖ –ù–µ –±–∞—Ä–∞ –∏–Ω—Å—Ç–∞–ª–∞—Ü–∏—ò–∞ –Ω–∞ –±–∞–∑–∞
- ‚úÖ –ú–Ω–æ–≥—É –±—Ä–∑–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç—Å–∫–∏ —Å–µ —á–∏—Å—Ç–∏ –ø—Ä–∏ —Ä–µ—Å—Ç–∞—Ä—Ç
- ‚ùå –ü–æ–¥–∞—Ç–æ—Ü–∏—Ç–µ —Å–µ –≥—É–±–∞—Ç –ø—Ä–∏ –∑–∞—Ç–≤–æ—Ä–∞—ö–µ

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—ò–∞:**
```properties
# application.properties
spring.profiles.active=h2
```

**H2 Console:**
```
http://localhost:8080/h2-console

JDBC URL: jdbc:h2:mem:testdb
Username: sa
Password: (–ø—Ä–∞–∑–Ω–æ)
```

**–ü–æ–¥–∞—Ç–æ—Ü–∏:**
- –¢–∞–±–µ–ª–∏—Ç–µ —Å–µ –∫—Ä–µ–∏—Ä–∞–∞—Ç –∞–≤—Ç–æ–º–∞—Ç—Å–∫–∏ (`create-drop`)
- DataLoader –≥–∏ –≤—á–∏—Ç—É–≤–∞ –∏–Ω–∏—Ü–∏—ò–∞–ª–Ω–∏—Ç–µ –ø–æ–¥–∞—Ç–æ—Ü–∏
- –°–µ–∫–æ—ò restart = –ø—Ä–∞–∑–Ω–∞ –±–∞–∑–∞

---

### PostgreSQL Profile (Production –±–∞–∑–∞)

**–ö–æ–≥–∞ –¥–∞ –∫–æ—Ä–∏—Å—Ç–∏—Ç–µ:**
- –ó–∞ —Ñ–∏–Ω–∞–ª–Ω–∞ –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—ò–∞
- –ó–∞ –¥–æ–º–∞—à–Ω–∏ –∑–∞–¥–∞—á–∏
- –ö–æ–≥–∞ —Å–∞–∫–∞—Ç–µ –¥–∞ –≥–∏ –∑–∞—á—É–≤–∞—Ç–µ –ø–æ–¥–∞—Ç–æ—Ü–∏—Ç–µ

**–ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- ‚úÖ –ü–æ–¥–∞—Ç–æ—Ü–∏—Ç–µ –æ—Å—Ç–∞–Ω—É–≤–∞–∞—Ç –∑–∞—á—É–≤–∞–Ω–∏
- ‚úÖ Production-ready
- ‚úÖ –ü–æ–¥–¥—Ä–∂—É–≤–∞ –Ω–∞–ø—Ä–µ–¥–Ω–∏ —Ñ—É–Ω–∫—Ü–∏–∏
- ‚ùå –ë–∞—Ä–∞ PostgreSQL –∏–Ω—Å—Ç–∞–ª–∞—Ü–∏—ò–∞

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—ò–∞:**
```properties
# application.properties
spring.profiles.active=prod
```

**–ë–∞—Ä–∞—ö–∞:**
- PostgreSQL –º–æ—Ä–∞ –¥–∞ –±–∏–¥–µ –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞–Ω –∏ –∞–∫—Ç–∏–≤–µ–Ω
- –ë–∞–∑–∞—Ç–∞ `books` –º–æ—Ä–∞ –¥–∞ –ø–æ—Å—Ç–æ–∏
- –ü—Ä–∞–≤–∏–ª–µ–Ω username/password

**–ü–æ–¥–∞—Ç–æ—Ü–∏:**
- –¢–∞–±–µ–ª–∏—Ç–µ —Å–µ –∞–∂—É—Ä–∏—Ä–∞–∞—Ç (`update`)
- DataLoader –≥–∏ –¥–æ–¥–∞–≤–∞ –ø–æ–¥–∞—Ç–æ—Ü–∏—Ç–µ —Å–∞–º–æ –ø—Ä–≤–ø–∞—Ç
- –ü–æ–¥–∞—Ç–æ—Ü–∏—Ç–µ –æ—Å—Ç–∞–Ω—É–≤–∞–∞—Ç –ø–æ restart

---

## –°–ø–æ—Ä–µ–¥–±–∞

| –ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | H2 | PostgreSQL |
|----------------|-----|-----------|
| –ò–Ω—Å—Ç–∞–ª–∞—Ü–∏—ò–∞ | ‚ùå –ù–µ —Ç—Ä–µ–±–∞ | ‚úÖ –ü–æ—Ç—Ä–µ–±–Ω–∞ |
| –ë—Ä–∑–∏–Ω–∞ | ‚ö° –ú–Ω–æ–≥—É –±—Ä–∑–∞ | ‚öôÔ∏è –ë—Ä–∑–∞ |
| –ü–µ—Ä–∑–∏—Å—Ç–µ–Ω—Ü–∏—ò–∞ | ‚ùå –ü—Ä–∏–≤—Ä–µ–º–µ–Ω–∞ | ‚úÖ –¢—Ä–∞—ò–Ω–∞ |
| H2 Console | ‚úÖ –î–æ—Å—Ç–∞–ø–Ω–∞ | ‚ùå –ö–æ—Ä–∏—Å—Ç–∏ pgAdmin |
| –†–µ–∞–ª–Ω–∏ —É—Å–ª–æ–≤–∏ | ‚ùå Dev only | ‚úÖ Production |

---

## –ó–∞–µ–¥–Ω–∏—á–∫–∏ –ø—Ä–æ–±–ª–µ–º–∏

### 1. H2 –Ω–µ —Ä–∞–±–æ—Ç–∏ - porta 8080 –µ –∑–∞—Ñ–∞—Ç–µ–Ω–∞

**–ì—Ä–µ—à–∫–∞:**
```
Web server failed to start. Port 8080 was already in use.
```

**–†–µ—à–µ–Ω–∏–µ:**
```properties
# application.properties
server.port=8081
```

---

### 2. PostgreSQL –Ω–µ —Ä–∞–±–æ—Ç–∏ - –±–∞–∑–∞ –Ω–µ –ø–æ—Å—Ç–æ–∏

**–ì—Ä–µ—à–∫–∞:**
```
database "books" does not exist
```

**–†–µ—à–µ–Ω–∏–µ:**
```sql
psql -U postgres
CREATE DATABASE books;
\q
```

---

### 3. PostgreSQL –Ω–µ —Ä–∞–±–æ—Ç–∏ - –ø–æ–≥—Ä–µ—à–µ–Ω password

**–ì—Ä–µ—à–∫–∞:**
```
password authentication failed for user "postgres"
```

**–†–µ—à–µ–Ω–∏–µ:**
–ü—Ä–æ–º–µ–Ω–µ—Ç–µ –≥–æ password-–æ—Ç –≤–æ `application-prod.properties`:
```properties
spring.datasource.password=–í–∞—à–∏–æ—ÇPassword
```

---

## –ü—Ä–µ–ø–æ—Ä–∞–∫–∞

### –ó–∞ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—Å–∫–∏ –≤–µ–∂–±–∏:
```properties
spring.profiles.active=h2
```

### –ó–∞ –ø—Ä–µ–¥–∞–≤–∞—ö–µ –Ω–∞ –ø—Ä–æ–µ–∫—Ç:
```properties
spring.profiles.active=prod
```

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∞–∫—Ç–∏–≤–µ–Ω –ø—Ä–æ—Ñ–∏–ª

–ü—Ä–∏ —Å—Ç–∞—Ä—Ç—É–≤–∞—ö–µ –Ω–∞ –∞–ø–ª–∏–∫–∞—Ü–∏—ò–∞—Ç–∞, –ø—Ä–æ–≤–µ—Ä–µ—Ç–µ –≥–æ –ª–æ–≥–æ—Ç:

**H2:**
```
The following 1 profile is active: "h2"
Database: jdbc:h2:mem:testdb
```

**PostgreSQL:**
```
The following 1 profile is active: "prod"
Database: jdbc:postgresql://localhost:5432/books
```

---

## –¢–µ—Å—Ç–∏—Ä–∞—ö–µ

### H2:
1. –°—Ç–∞—Ä—Ç—É–≤–∞—ò—Ç–µ —Å–æ `spring.profiles.active=h2`
2. –û–¥–µ—Ç–µ –Ω–∞ `http://localhost:8080/books`
3. –î–æ–¥–∞–¥–µ—Ç–µ –∫–Ω–∏–≥–∞
4. –†–µ—Å—Ç–∞—Ä—Ç–∏—Ä–∞—ò—Ç–µ –∞–ø–ª–∏–∫–∞—Ü–∏—ò–∞—Ç–∞
5. ‚úÖ –ö–Ω–∏–≥–∞—Ç–∞ **–ù–ï** —Ç—Ä–µ–±–∞ –¥–∞ –ø–æ—Å—Ç–æ–∏ (in-memory)

### PostgreSQL:
1. –°—Ç–∞—Ä—Ç—É–≤–∞—ò—Ç–µ —Å–æ `spring.profiles.active=prod`
2. –û–¥–µ—Ç–µ –Ω–∞ `http://localhost:8080/books`
3. –î–æ–¥–∞–¥–µ—Ç–µ –∫–Ω–∏–≥–∞
4. –†–µ—Å—Ç–∞—Ä—Ç–∏—Ä–∞—ò—Ç–µ –∞–ø–ª–∏–∫–∞—Ü–∏—ò–∞—Ç–∞
5. ‚úÖ –ö–Ω–∏–≥–∞—Ç–∞ **–¢–†–ï–ë–ê** –¥–∞ –ø–æ—Å—Ç–æ–∏ (–ø–µ—Ä–∑–∏—Å—Ç–µ–Ω—Ç–Ω–∞)

---

## –ó–∞–±–µ–ª–µ—à–∫–∞

–ê–ø–ª–∏–∫–∞—Ü–∏—ò–∞—Ç–∞ –µ **100% –∫–æ–º–ø–∞—Ç–∏–±–∏–ª–Ω–∞** —Å–æ –¥–≤–µ—Ç–µ –±–∞–∑–∏ –±–ª–∞–≥–æ–¥–∞—Ä–µ–Ω–∏–µ –Ω–∞:
- JPA –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—ò–∞
- Hibernate –∞–≤—Ç–æ–º–∞—Ç—Å–∫–∞ –¥–µ—Ç–µ–∫—Ü–∏—ò–∞ –Ω–∞ –¥–∏—ò–∞–ª–µ–∫—Ç
- Spring –ø—Ä–æ—Ñ–∏–ª–∏

–ï–¥–Ω–æ—Å—Ç–∞–≤–Ω–æ —Å–º–µ–Ω–µ—Ç–µ –≥–æ –ø—Ä–æ—Ñ–∏–ª–æ—Ç –∏ –≥–æ—Ç–æ–≤–æ! üéâ
